<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="theme-color" content="#3b82f6" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SubTracker - Subscription Management Made Simple</title>
    <meta name="description" content="Take control of your subscriptions. Track, manage, and optimize all your recurring payments in one beautiful dashboard." />
    
    <!-- Updated Content Security Policy for Paddle integration -->
    <meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
    https://cdn.paddle.com https://js.paddle.com https://checkout.paddle.com https://*.paddle.com
    https://public.profitwell.com;
  style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.paddle.com;
  font-src 'self' https://fonts.gstatic.com;
  img-src 'self' data: https: blob:;
  connect-src 'self'
    https://*.supabase.co wss://*.supabase.co
    https://api.paddle.com https://checkout-service.paddle.com https://sandbox-checkout-service.paddle.com
    https://js.paddle.com https://cdn.paddle.com https://public.profitwell.com;
  frame-src 'self' https://buy.paddle.com https://checkout.paddle.com https://*.paddle.com;
  child-src 'self' https://buy.paddle.com https://checkout.paddle.com https://*.paddle.com;
">
    
    <script 
      src="https://cdn.paddle.com/paddle/v2/paddle.js" 
      crossorigin="anonymous"
      onload="console.log('‚úÖ Paddle script loaded successfully'); window.paddleReady = true;"
      onerror="console.error('‚ùå Failed to load Paddle script');"
    ></script>

    <script>
      // Initialize paddle ready state
      window.paddleReady = false;
      
      // Fallback function in case the main Paddle script fails
      function loadFallbackScript() {
        console.log('üîÑ Trying fallback Paddle script...');
        const script = document.createElement('script');
        script.src = 'https://js.paddle.com/paddle/v2/paddle.js';  // Fallback URL
        script.crossOrigin = 'anonymous';
        script.onload = () => {
          console.log('‚úÖ Fallback Paddle script loaded');
          window.paddleReady = true;
        };
        script.onerror = () => console.error('‚ùå Fallback Paddle script failed');
        document.head.appendChild(script);
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- React app loads AFTER Paddle -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>